# 系统调用的具体过程

## 大致流程简述
NPUcore的系统调用是基于中断来实现的，大致会经历以下步骤：
（用户态，内核态由CPU特定寄存器中的几位来表示）
| 内核态 | 用户态 |
| :-----:| :----: 
|  | hello.c(执行ecall) | 
| 硬件断点保存   |   |
| OS手动断点保存 |   |
| 中断处理      |   |
| 中断返回，OS手动断点恢复| |
| ret 硬件断点恢复| |
|   | hello.c继续执行 |

## 代码跟踪
启动调试后，会位于OS中，在进程调度器函数中设置断点。
切换为hello.c的对应文件（编译时注意添加`-g`，以生成调试标记符）
```shell
file _hello  # 切换文件
break main       # 打断点在函数main处
continue
```

到达用户文件后，在要使用系统调用的函数前设置断点
```shell

```

由于随后会陷入内核，再次切换gdb文件
```shell

```



